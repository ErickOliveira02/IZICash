<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zeny - Controle Financeiro Simples</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üí∞</text></svg>">
</head>
<body>
    <!-- Tela de Login -->
    <div id="loginScreen" class="login-screen">
        <div class="login-box">
            <h1>Zeny</h1>
            <p>Controle financeiro simples</p>

            <!-- Form de Login -->
            <form id="loginForm">
                <input
                    type="email"
                    id="loginEmail"
                    placeholder="Email"
                    autocomplete="email"
                    required
                >
                <input
                    type="password"
                    id="loginPassword"
                    placeholder="Senha"
                    autocomplete="current-password"
                    required
                >
                <button type="submit" class="btn-primary">Entrar</button>
            </form>

            <div class="auth-divider">
                <span>ou</span>
            </div>

            <button class="btn-secondary" onclick="app.showRegister()">Criar Conta</button>

            <button class="btn-link" onclick="app.showForgotPassword()">Esqueci minha senha</button>
        </div>
    </div>

    <!-- Tela de Cadastro -->
    <div id="registerScreen" class="login-screen hidden">
        <div class="login-box">
            <h1>Criar Conta</h1>
            <p>Preencha seus dados</p>

            <form id="registerForm">
                <input
                    type="text"
                    id="registerUsername"
                    placeholder="Username (apelido)"
                    autocomplete="username"
                    required
                >
                <input
                    type="email"
                    id="registerEmail"
                    placeholder="Email"
                    autocomplete="email"
                    required
                >
                <input
                    type="password"
                    id="registerPassword"
                    placeholder="Senha (m√≠nimo 6 caracteres)"
                    autocomplete="new-password"
                    minlength="6"
                    required
                >
                <input
                    type="password"
                    id="registerPasswordConfirm"
                    placeholder="Confirmar senha"
                    autocomplete="new-password"
                    minlength="6"
                    required
                >
                <button type="submit" class="btn-primary">Cadastrar</button>
            </form>

            <button class="btn-link" onclick="app.showLogin()">J√° tenho conta</button>
        </div>
    </div>

    <!-- Tela de Recuperar Senha -->
    <div id="forgotScreen" class="login-screen hidden">
        <div class="login-box">
            <h1>Recuperar Senha</h1>
            <p>Digite seu email para receber o link de recupera√ß√£o</p>

            <form id="forgotForm">
                <input
                    type="email"
                    id="forgotEmail"
                    placeholder="Email"
                    autocomplete="email"
                    required
                >
                <button type="submit" class="btn-primary">Enviar Link</button>
            </form>

            <button class="btn-link" onclick="app.showLogin()">Voltar ao login</button>
        </div>
    </div>

    <!-- Tela de Verifica√ß√£o de Email -->
    <div id="verifyScreen" class="login-screen hidden">
        <div class="login-box">
            <div class="verify-icon">üìß</div>
            <h1>Verifique seu Email</h1>
            <p>Enviamos um link de confirma√ß√£o para:</p>
            <p class="verify-email" id="verifyEmailText">email@exemplo.com</p>
            <p class="verify-hint">Clique no link do email para ativar sua conta.</p>
            <button class="btn-secondary" onclick="app.showLogin()">Voltar ao Login</button>
        </div>
    </div>

    <!-- Tela Principal -->
    <div id="appScreen" class="hidden">
        <!-- Header -->
        <header class="header">
            <h1>Zeny</h1>
            <div class="header-actions">
                <button id="settingsBtn">Config</button>
                <button id="logoutBtn">Sair</button>
            </div>
        </header>

        <!-- Tela de Setup (primeira vez) -->
        <div id="setupScreen" class="setup-screen hidden">
            <div class="setup-box">
                <h2>Configure seu primeiro bloco</h2>
                <p>Um bloco representa uma entrada de dinheiro (ex: sal√°rio dia 10)</p>

                <div class="form-group">
                    <label>Nome do bloco</label>
                    <input type="text" id="setupBlockName" placeholder="Ex: Dia 10, Sal√°rio, Freelance">
                </div>

                <div class="form-group">
                    <label>Dia de entrada (1-31)</label>
                    <input type="number" id="setupBlockDay" min="1" max="31" placeholder="Ex: 10">
                </div>

                <div class="form-group">
                    <label>Valor da entrada (R$)</label>
                    <input type="number" id="setupBlockAmount" step="0.01" placeholder="Ex: 810.00">
                </div>

                <div class="form-group">
                    <label>Limite para gastos vari√°veis (opcional)</label>
                    <input type="number" id="setupDailyLimit" step="0.01" placeholder="Ex: 100.00">
                </div>

                <button class="btn-primary" onclick="app.createFirstBlock()">Criar Bloco</button>
            </div>
        </div>

        <!-- Conte√∫do Principal -->
        <div id="mainContent">
            <!-- Seletor de M√™s -->
            <div class="month-selector">
                <button id="prevMonth">‚óÄ</button>
                <span id="currentMonth">Janeiro 2024</span>
                <button id="nextMonth">‚ñ∂</button>
            </div>

            <!-- Resumo -->
            <div class="summary" id="summaryCards">
                <!-- Gerado via JS -->
            </div>

            <!-- Blocos -->
            <div class="blocks-container" id="blocksContainer">
                <!-- Gerado via JS -->
            </div>
        </div>

    </div>

    <!-- Modal: Adicionar Gasto -->
    <div class="modal-overlay hidden" id="addExpenseModal">
        <div class="modal">
            <div class="modal-header">
                <h2>Adicionar Gasto</h2>
                <button class="modal-close">√ó</button>
            </div>
            <div class="modal-body">
                <form id="addExpenseForm">
                    <div class="form-group">
                        <label>Bloco</label>
                        <select id="expenseBlock" required>
                            <!-- Gerado via JS -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Descri√ß√£o</label>
                        <input type="text" id="expenseDescription" placeholder="Ex: Lanche, Uber, Caf√©" required>
                    </div>
                    <div class="form-group">
                        <label>Valor (R$)</label>
                        <input type="number" id="expenseAmount" step="0.01" min="0.01" placeholder="0.00" required>
                    </div>
                    <button type="submit" class="btn-primary">Adicionar</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal: Configura√ß√µes -->
    <div class="modal-overlay hidden" id="settingsModal">
        <div class="modal modal-large">
            <div class="modal-header">
                <h2>Configura√ß√µes</h2>
                <button class="modal-close">√ó</button>
            </div>
            <div class="modal-body" id="settingsContent">
                <!-- Gerado via JS -->
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="app-footer">
        Desenvolvido por <span>EJO SOFTDEV</span>
    </footer>

    <!-- Modal: Nova Vers√£o -->
    <div class="update-modal hidden" id="updateModal">
        <div class="update-content">
            <div class="update-icon">üöÄ</div>
            <h2>Nova Vers√£o Dispon√≠vel!</h2>
            <p>Uma atualiza√ß√£o do Zeny est√° pronta.</p>
            <button class="btn-primary" onclick="location.reload(true)">Atualizar Agora</button>
            <button class="btn-later" onclick="document.getElementById('updateModal').classList.add('hidden')">Depois</button>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay hidden" id="loadingOverlay">
        <div class="loading-spinner"></div>
    </div>

    <!-- Scripts -->
    <script src="js/config.js"></script>
    <script src="js/supabase.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
