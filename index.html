<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IZI Cash - Controle Financeiro</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üí∞</text></svg>">
</head>
<body>
    <!-- Tela de Login -->
    <div id="loginScreen" class="login-screen">
        <div class="login-box">
            <h1>IZI Cash</h1>
            <p>Controle financeiro simples</p>
            <form id="loginForm">
                <input
                    type="text"
                    id="usercodeInput"
                    placeholder="Digite seu c√≥digo"
                    autocomplete="off"
                    required
                >
                <button type="submit">Entrar</button>
            </form>
            <small class="login-hint">Ex: erick, maria, joao123</small>
        </div>
    </div>

    <!-- Tela Principal -->
    <div id="appScreen" class="hidden">
        <!-- Header -->
        <header class="header">
            <h1>IZI Cash</h1>
            <div class="header-actions">
                <button id="settingsBtn">Config</button>
                <button id="logoutBtn">Sair</button>
            </div>
        </header>

        <!-- Tela de Setup (primeira vez) -->
        <div id="setupScreen" class="setup-screen hidden">
            <div class="setup-box">
                <h2>Configure seu primeiro bloco</h2>
                <p>Um bloco representa uma entrada de dinheiro (ex: sal√°rio dia 10)</p>

                <div class="form-group">
                    <label>Nome do bloco</label>
                    <input type="text" id="setupBlockName" placeholder="Ex: Dia 10, Sal√°rio, Freelance">
                </div>

                <div class="form-group">
                    <label>Dia de entrada (1-31)</label>
                    <input type="number" id="setupBlockDay" min="1" max="31" placeholder="Ex: 10">
                </div>

                <div class="form-group">
                    <label>Valor da entrada (R$)</label>
                    <input type="number" id="setupBlockAmount" step="0.01" placeholder="Ex: 810.00">
                </div>

                <div class="form-group">
                    <label>Limite para gastos vari√°veis (opcional)</label>
                    <input type="number" id="setupDailyLimit" step="0.01" placeholder="Ex: 100.00">
                </div>

                <button class="btn-primary" onclick="app.createFirstBlock()">Criar Bloco</button>
            </div>
        </div>

        <!-- Conte√∫do Principal -->
        <div id="mainContent">
            <!-- Seletor de M√™s -->
            <div class="month-selector">
                <button id="prevMonth">‚óÄ</button>
                <span id="currentMonth">Janeiro 2024</span>
                <button id="nextMonth">‚ñ∂</button>
            </div>

            <!-- Resumo -->
            <div class="summary" id="summaryCards">
                <!-- Gerado via JS -->
            </div>

            <!-- Blocos -->
            <div class="blocks-container" id="blocksContainer">
                <!-- Gerado via JS -->
            </div>
        </div>

        <!-- Bot√£o Flutuante -->
        <button class="quick-add-btn" id="quickAddBtn">+</button>
    </div>

    <!-- Modal: Adicionar Gasto -->
    <div class="modal-overlay hidden" id="addExpenseModal">
        <div class="modal">
            <div class="modal-header">
                <h2>Adicionar Gasto</h2>
                <button class="modal-close">√ó</button>
            </div>
            <div class="modal-body">
                <form id="addExpenseForm">
                    <div class="form-group">
                        <label>Bloco</label>
                        <select id="expenseBlock" required>
                            <!-- Gerado via JS -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Descri√ß√£o</label>
                        <input type="text" id="expenseDescription" placeholder="Ex: Lanche, Uber, Caf√©" required>
                    </div>
                    <div class="form-group">
                        <label>Valor (R$)</label>
                        <input type="number" id="expenseAmount" step="0.01" min="0.01" placeholder="0.00" required>
                    </div>
                    <button type="submit" class="btn-primary">Adicionar</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal: Configura√ß√µes -->
    <div class="modal-overlay hidden" id="settingsModal">
        <div class="modal modal-large">
            <div class="modal-header">
                <h2>Configura√ß√µes</h2>
                <button class="modal-close">√ó</button>
            </div>
            <div class="modal-body" id="settingsContent">
                <!-- Gerado via JS -->
            </div>
        </div>
    </div>

    <!-- Modal: Nova Vers√£o -->
    <div class="update-modal hidden" id="updateModal">
        <div class="update-content">
            <div class="update-icon">üöÄ</div>
            <h2>Nova Vers√£o Dispon√≠vel!</h2>
            <p>Uma atualiza√ß√£o do IZI Cash est√° pronta.</p>
            <button class="btn-primary" onclick="location.reload(true)">Atualizar Agora</button>
            <button class="btn-later" onclick="document.getElementById('updateModal').classList.add('hidden')">Depois</button>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/config.js"></script>
    <script src="js/supabase.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
